{"ast":null,"code":"import 'reflect-metadata';\nimport { ApolloServer, gql } from 'apollo-server-micro';\nconst typeDefs = gql`\n  type Query {\n    products: [Product!]!\n  }\n  type Product {\n    id: Int!\n    name: String\n  }\n`;\nconst resolvers = {\n  Query: {\n    products(parent, args, context) {\n      return [{\n        id: 0,\n        name: 'Nextjs'\n      }];\n    }\n\n  }\n};\nlet apolloServer; // eslint-disable-next-line\n\nlet apolloHandler;\nexport const config = {\n  api: {\n    bodyParser: false\n  }\n};\nexport default (async (req, res) => {\n  if (!apolloServer) {\n    apolloServer = new ApolloServer({\n      typeDefs,\n      resolvers\n    });\n    apolloHandler = apolloServer.createHandler({\n      path: '/api/graphql'\n    });\n  }\n\n  return apolloHandler(req, res);\n});","map":{"version":3,"sources":["/Users/aleksey/Dev/Trash/shopping-cart/pages/api/graphql.ts"],"names":["ApolloServer","gql","typeDefs","resolvers","Query","products","parent","args","context","id","name","apolloServer","apolloHandler","config","api","bodyParser","req","res","createHandler","path"],"mappings":"AAAA,OAAO,kBAAP;AACA,SAASA,YAAT,EAAuBC,GAAvB,QAAkC,qBAAlC;AAGA,MAAMC,QAAQ,GAAGD,GAAI;;;;;;;;CAArB;AAUA,MAAME,SAAS,GAAG;AAChBC,EAAAA,KAAK,EAAE;AACLC,IAAAA,QAAQ,CAACC,MAAD,EAASC,IAAT,EAAeC,OAAf,EAAwB;AAC9B,aAAO,CAAC;AAAEC,QAAAA,EAAE,EAAE,CAAN;AAASC,QAAAA,IAAI,EAAE;AAAf,OAAD,CAAP;AACD;;AAHI;AADS,CAAlB;AAQA,IAAIC,YAAJ,C,CACA;;AACA,IAAIC,aAAJ;AAEA,OAAO,MAAMC,MAAM,GAAG;AACpBC,EAAAA,GAAG,EAAE;AACHC,IAAAA,UAAU,EAAE;AADT;AADe,CAAf;AAMP,gBAAe,OAAOC,GAAP,EAA4BC,GAA5B,KAAoE;AACjF,MAAI,CAACN,YAAL,EAAmB;AACjBA,IAAAA,YAAY,GAAG,IAAIX,YAAJ,CAAiB;AAAEE,MAAAA,QAAF;AAAYC,MAAAA;AAAZ,KAAjB,CAAf;AACAS,IAAAA,aAAa,GAAGD,YAAY,CAACO,aAAb,CAA2B;AAAEC,MAAAA,IAAI,EAAE;AAAR,KAA3B,CAAhB;AACD;;AACD,SAAOP,aAAa,CAACI,GAAD,EAAMC,GAAN,CAApB;AACD,CAND","sourcesContent":["import 'reflect-metadata';\nimport { ApolloServer, gql } from 'apollo-server-micro';\nimport { NextApiHandler, NextApiRequest, NextApiResponse } from 'next';\n\nconst typeDefs = gql`\n  type Query {\n    products: [Product!]!\n  }\n  type Product {\n    id: Int!\n    name: String\n  }\n`;\n\nconst resolvers = {\n  Query: {\n    products(parent, args, context) {\n      return [{ id: 0, name: 'Nextjs' }];\n    },\n  },\n};\n\nlet apolloServer: ApolloServer;\n// eslint-disable-next-line\nlet apolloHandler: (req: any, res: any) => Promise<void>;\n\nexport const config = {\n  api: {\n    bodyParser: false,\n  },\n};\n\nexport default async (req: NextApiRequest, res: NextApiResponse): Promise<void> => {\n  if (!apolloServer) {\n    apolloServer = new ApolloServer({ typeDefs, resolvers });\n    apolloHandler = apolloServer.createHandler({ path: '/api/graphql' });\n  }\n  return apolloHandler(req, res);\n};\n"]},"metadata":{},"sourceType":"module"}